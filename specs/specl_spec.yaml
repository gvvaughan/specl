describe specl:
- before: !lua |
    function exit_status (cmd)
      local output, status = "", nil
      local f = io.popen (cmd .. "; echo $?")
      while true do
        local line = f:read ()
        if line == nil then break end
        output = output .. "\n" .. status
        status = line
      end
      return tonumber (status)
    end

- describe command line interface:
  - it exits with zero status when there are no failing examples: !lua |
      yaml = "describe x:\n- it passes: !lua expect (0).should_be (0)"
      expect (exit_status ("printf '" .. yaml .. "'|src/specl")).should_be (0)

  - "it exits with non-zero status when there are failing examples": !lua |
      yaml = "describe x:\n- it fails: !lua expect (1).should_be (0)"
      expect (exit_status ("printf '" .. yaml .."'|src/specl")).should_not_be (0)
