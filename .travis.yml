# Lua is not officially supported, but an erlang environment will do.
language: erlang

env:
  - LUA="lua5.1"
  - LUA="lua5.2"
  - LUA="luajit"

# Tool setup.
install:
  - sudo apt-get install libyaml
  - sudo apt-get install help2man
  - sudo apt-get install lua5.1
  - sudo apt-get install lua5.2
  - sudo apt-get install luajit
  - sudo apt-get install luarocks

# Configure and build.
script:
  - sudo luarocks install ansicolors
  - sudo luarocks install lyaml
  - ./bootstrap
  - ./configure
  - make
  - make rockspecs
  - sudo luarocks make specl-git-1.rockspec

# Run specs.
after_script:
  - make check

notifications:
  recipients:
    - gary@vaughan.pe
  email:
    on_success: change
    on_failure: always
